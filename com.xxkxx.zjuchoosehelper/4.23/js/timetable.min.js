function getTime(){if($("div.outer_xkxx_list").length<=0)return;$("#timesheet1").length>0&&($("#timesheet1").remove(),$("#timesheet2").remove(),$("#hidebutton").remove()),$("body").append("<div id='timesheet1' style='z-index:100;opacity:0.8;float:right;position:fixed;top:32px;right:32px;background-color:white;width:280px;height:300px'></div>"),$("body").append("<div id='timesheet2' style='z-index:100;opacity:0.8;float:right;position:fixed;top:364px;right:32px;background-color:white;width:280px;height:300px'></div>"),$("body").append("<div id='hidebutton' style='z-index:100;color:white;cursor:pointer;opacity:1.0;display:inline-block;width:64px;height:20px;text-align:center;float:right;position:fixed;top:0px;right:32px;background-color:#0483d4;'>隐藏课表</div>"),$("#hidebutton").click(function(){$("#timesheet1").remove(),$("#timesheet2").remove(),$("#hidebutton").remove()});var e=$("div.outer_xkxx_list"),t=new Array("一","二","三","四","五","六","日");for(var n=0;n<7;n++)$("#timesheet1").append("<div style='width:31px;display:inline-block;height:15px;position:absolute;top:5px;text-align:center;left:"+(32+32*n)+"px'>"+t[n]+"</div>"),$("#timesheet2").append("<div style='width:31px;display:inline-block;height:15px;position:absolute;top:5px;text-align:center;left:"+(32+32*n)+"px'>"+t[n]+"</div>");$("#timesheet1").append("<div style='width:31px;display:inline-block;height:15px;position:absolute;top:5px;text-align:center;left:5px'>秋/春</div>"),$("#timesheet2").append("<div style='width:31px;display:inline-block;height:15px;position:absolute;top:5px;text-align:center;left:5px'>冬/夏</div>");for(var n=0;n<14;n++)$("#timesheet1").append("<div style='width:31px;display:inline-block;height:15px;position:absolute;top:5px;text-align:center;top:"+(48+n*16)+"px'>"+(n+1)+"</div>"),$("#timesheet2").append("<div style='width:31px;display:inline-block;height:15px;position:absolute;top:5px;text-align:center;top:"+(48+n*16)+"px'>"+(n+1)+"</div>");var r=e.length,i,s;for(var o=0;o<r;o++){var u=$(e[o]).find("a.jump").html();u=u.replace(/\([a-zA-Z0-9]+\)([^-]+)-.+/ig,"$1");for(var a=0;a<$(e[o]).find("p.xxq").length;a++){var f=$($(e[o]).find("p.xxq")[a]).html(),l=$($(e[o]).find("p.time")[a]).html().split("<br>");for(var c=0;c<l.length;c++){for(var n=0;n<7;n++)l[c].search(t[n])!=-1&&(i=32+32*n);var h=new Array;l[c].replace(/[^0-9|,]/ig,""),l[c].replace(/(\d+)/ig,function(e){return h.push(parseInt(e)),""});for(var p=0;p<h.length;p++)(f.search("春")>=0||f.search("秋")>=0)&&$("#timesheet1").append("<div style='font-size:6px;color:white;overflow:hidden;width:31px;height:15px;position:absolute;background-color:#0483d4;top:"+(32+h[p]*16)+"px;left:"+i+"px'>"+u+"</div>"),(f.search("夏")>=0||f.search("冬")>=0)&&$("#timesheet2").append("<div style='font-size:6px;color:white;overflow:hidden;width:31px;height:15px;position:absolute;background-color:#0483d4;top:"+(32+h[p]*16)+"px;left:"+i+"px'>"+u+"</div>")}}}$("tr.body_tr").length>0&&($("tr.body_tr").mouseover(function(){var e=$(this).attr("id");if($("[classid='"+e+"']").length==0){var n=$(this).children("td.xxqmc").html(),r=$(this).children("td.sksj").html();console.log(n);var i=r.split("<br>"),s;for(var o=0;o<i.length;o++){for(var u=0;u<7;u++)i[o].search(t[u])!=-1&&(s=32+32*u);var a=new Array;i[o].replace(/[^0-9|,]/ig,""),i[o].replace(/(\d+)/ig,function(e){return a.push(parseInt(e)),""});for(var f=0;f<a.length;f++)n.search("春")>=0&&$("#timesheet1").append("<div classid='"+e+"' style='opacity:0.3;width:31px;height:15px;position:absolute;background-color:red;top:"+(32+a[f]*16)+"px;left:"+s+"px'></div>"),n.search("夏")>=0&&$("#timesheet2").append("<div classid='"+e+"' style='opacity:0.3;width:31px;height:15px;position:absolute;background-color:red;top:"+(32+a[f]*16)+"px;left:"+s+"px'></div>")}}}),$("tr.body_tr").mouseleave(function(){var e=$(this).attr("id");$("[classid='"+e+"']").remove()}))}$(document).ready(function(){var e=new Array("一","二","三","四","五","六","日");$("#yhgnPage").bind("DOMNodeInserted",function(t){$("tr.body_tr").length>0&&($("tr.body_tr").mouseover(function(){var t=$(this).attr("id");if($("[classid='"+t+"']").length==0){var n=$(this).children("td.xxq").html(),r=$(this).children("td.sksj").html(),i=r.split("<br>"),s;for(var o=0;o<i.length;o++){for(var u=0;u<7;u++)i[o].search(e[u])!=-1&&(s=32+32*u);var a=new Array;i[o].replace(/[^0-9|,]/ig,""),i[o].replace(/(\d+)/ig,function(e){return a.push(parseInt(e)),""});for(var f=0;f<a.length;f++)(n.search("春")>=0||n.search("秋")>=0)&&$("#timesheet1").append("<div classid='"+t+"' style='opacity:0.3;width:31px;height:15px;position:absolute;background-color:red;top:"+(32+a[f]*16)+"px;left:"+s+"px'></div>"),(n.search("夏")>=0||n.search("冬")>=0)&&$("#timesheet2").append("<div classid='"+t+"' style='opacity:0.3;width:31px;height:15px;position:absolute;background-color:red;top:"+(32+a[f]*16)+"px;left:"+s+"px'></div>")}}}),$("tr.body_tr").mouseleave(function(){var e=$(this).attr("id");$("[classid='"+e+"']").remove()}))})}),$("#showbutton").length==0&&($("body").append("<div id='showbutton' style='color:white;cursor:pointer;opacity:1.0;display:inline-block;width:64px;height:20px;text-align:center;float:right;position:fixed;top:0px;right:32px;background-color:#0483d4'>显示课表</div>"),$("#showbutton").click(function(){getTime()})),getTime();