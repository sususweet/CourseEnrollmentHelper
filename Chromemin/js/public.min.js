function Converttime(e){var t="";return e.indexOf("1")>=0&&e.indexOf("10")<0&&e.indexOf("11")<0&&e.indexOf("12")<0&&e.indexOf("13")<0&&(t+=",01"),e.indexOf("2")>=0&&e.indexOf("12")<0&&(t+=",02"),e.indexOf("3")>=0&&e.indexOf("13")<0&&(t+=",03"),e.indexOf("4")>=0&&(t+=",04"),e.indexOf("5")>=0&&(t+=",05"),e.indexOf("6")>=0&&(t+=",06"),e.indexOf("7")>=0&&(t+=",07"),e.indexOf("8")>=0&&(t+=",08"),e.indexOf("9")>=0&&(t+=",09"),e.indexOf("10")>=0&&(t+=",10"),e.indexOf("11")>=0&&(t+=",11"),e.indexOf("12")>=0&&(t+=",12"),e.indexOf("13")>=0&&(t+=",13"),t}function Convertterm(e){var t="";return e.indexOf("秋")>=0&&(t+=",01"),e.indexOf("冬")>=0&&(t+=",02"),e.indexOf("春")>=0&&(t+=",03"),e.indexOf("夏")>=0&&(t+=",04"),t}function Convertweekly(e){var t="";return e.indexOf("双周")>=0?t+=",d":e.indexOf("单周")>=0?t+=",s":t+=",d,s",t}function GetSubject(){subject=document.getElementById("Label_jbxx").innerText,subject=subject.match(/课程名称：.*学分/),subject=subject[0].substr(5),subject=trimStr(subject.substr(0,subject.length-2))}function Convertday(e,t){e=e.split("<br>");var n="",r="";termcache=Convertterm(t).split(",");for(var i=1;i<termcache.length;i++)for(var s=0;s<e.length;s++){weekcache=Convertweekly(e[s]).split(",");if(e[s].indexOf("周一")>=0){var o=Converttime(e[s]).split(",");for(var u=1;u<o.length;u++)for(var a=1;a<weekcache.length;a++)n=n+"1x"+o[u]+termcache[i]+weekcache[a]+","}if(e[s].indexOf("周二")>=0){var o=Converttime(e[s]).split(",");for(var u=1;u<o.length;u++)for(var a=1;a<weekcache.length;a++)n=n+"2x"+o[u]+termcache[i]+weekcache[a]+","}if(e[s].indexOf("周三")>=0){var o=Converttime(e[s]).split(",");for(var u=1;u<o.length;u++)for(var a=1;a<weekcache.length;a++)n=n+"3x"+o[u]+termcache[i]+weekcache[a]+","}if(e[s].indexOf("周四")>=0){var o=Converttime(e[s]).split(",");for(var u=1;u<o.length;u++)for(var a=1;a<weekcache.length;a++)n=n+"4x"+o[u]+termcache[i]+weekcache[a]+","}if(e[s].indexOf("周五")>=0){var o=Converttime(e[s]).split(",");for(var u=1;u<o.length;u++)for(var a=1;a<weekcache.length;a++)n=n+"5x"+o[u]+termcache[i]+weekcache[a]+","}if(e[s].indexOf("周六")>=0){var o=Converttime(e[s]).split(",");for(var u=1;u<o.length;u++)for(var a=1;a<weekcache.length;a++)n=n+"6x"+o[u]+termcache[i]+weekcache[a]+","}if(e[s].indexOf("周日")>=0){var o=Converttime(e[s]).split(",");for(var u=1;u<o.length;u++)for(var a=1;a<weekcache.length;a++)n=n+"7x"+o[u]+termcache[i]+weekcache[a]+","}}return n}function Checktime(e,t){try{var n=new Array,r="";NProgress.inc(),data=$.ajax({type:"GET",async:!1,timeout:5e3,url:t+"/xskbcx.aspx?xh="+e,error:function(e,t,n){swal("获取课表错误！","呜呜……选课小精灵发现教务网好像出了什么问题~主人快检查下能否正常进入教务网哦~","error")}}).responseText,NProgress.done(),data=data.match(/<A href='#' onclick="window.open\('.{1,}','kcb','toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=1,resizable=1'\)">(<i><font color=red>){0,1}.{1,}(<\/font><\/i>){0,1}<\/a><\/td><td>.{1,}<\/td><td>.{1,}<\/td><td>.{1,}<\/td><td>.{1,}<\/td><td>.{1,}<\/td>/ig);for(var i=0;i<data.length;i++){var s=data[i].match(/<A href='#' onclick="window.open\('.{1,}','kcb','toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=1,resizable=1'\)">(<i><font color=red>){0,1}[0-9A-Z]{8}(<\/font><\/i>){0,1}<\/A>/g);s=s[0].match(/[0-9A-Z]{8}/),s=s[0];try{var o=data[i].match(/<td>[\u4e00-\u9fa5]{1,2}<\/td>/);o=o[0].match(/[\u4e00-\u9fa5]{1,2}/),o=o[0]}catch(u){o="0"}try{var a=data[i].match(/周[\u4e00-\u9fa5]{1}第.{1,}节.{0,4}<\/td>/g);a=a[0],a=a.replace("</td>","")}catch(u){a="0"}n[i]={course:s,courseterm:o,coursetime:a},console.log(n[i]),a!="0"&&o!="0"&&(r+=Convertday(a,o))}return r}catch(u){swal("上课时间获取模块错误！","呜呜……/(ㄒoㄒ)/~选课小精灵无法工作啦，主人检查下浏览器版本是否最新哦，或者联系作者详细描述错误情形以帮助改进插件吧~\n\n错误信息：\n"+u,"error"),console.log(u)}}function GetPermit(e,t){try{e=e.match(/richContent3'>\n.{0,}\n<\/div>/),e=e[0].match(/<p>\d{1,}<\/p>/g);for(var n=0;n<e.length;n++){target=e[n].match(/\d{1,}/),target=target[0];if(t==target)return 1}return 0}catch(r){swal("身份验证模块错误！","呜呜……/(ㄒoㄒ)/~选课助手崩溃啦，主人检查下浏览器版本是否最新哦，或者联系作者详细描述错误情形以帮助改进插件吧~\n\n错误信息：\n"+r,"error"),console.log(r)}};